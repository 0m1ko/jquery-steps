/*! 
 * jQuery-steps v0.9.7b - 05/30/2013
 * Copyright (c) 2013 Rafael J. Staib (https://github.com/rstaib/jquery-steps)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
(function(t,e){"use strict";function n(e){var n=t.extend(!0,{},t.fn.steps.defaults,e);return this.each(function(){var e=t(this);e.data("options",n),e.data("state",{currentIndex:n.startIndex,currentStep:null,stepCount:0,transitionShowElement:null}),v(e),s(e),n.autoFocus&&1===w&&e.find("#"+C(e)+k+n.startIndex).focus(),e.bind("finishing.steps",n.onFinishing),e.bind("finished.steps",n.onFinished),e.bind("stepChanging.steps",n.onStepChanging),e.bind("stepChanged.steps",n.onStepChanged),n.enableKeyNavigation&&e.keyup(I),e.find(".steps a").bind("click.steps",S),e.find(".actions a").bind("click.steps",y)})}function a(t,e){var n=t.data("options"),a=t.data("state"),r=a.currentIndex;if(e>=0&&a.stepCount>e&&!(n.forceMoveForward&&a.currentIndex>e)){var s=t.find("#"+C(t)+k+e),i=s.parent(),d=i.hasClass("disabled");return i.removeClass("disabled").attr("aria-disabled","false"),s.click(),r===a.currentIndex&&d?(i.addClass("disabled").attr("aria-disabled","true"),!1):!0}return!1}function r(e,n){var a=e.data("options"),r=e.data("state");if(0>n||n>=r.stepCount||0===r.stepCount)throw Error("Index out of range.");if(!(a.forceMoveForward&&r.currentIndex>n)){var s=r.currentIndex;if(e.triggerHandler("stepChanging",[r.currentIndex,n])){r.currentIndex=n,x(e,n),r.currentStep=h(e,n),u(e,n,s),f(e),o(e);var i=e.find(".content > .body");switch(m(t.fn.steps.transitionEffect,a.transitionEffect)){case t.fn.steps.transitionEffect.fade:r.transitionShowElement=i.eq(n),i.eq(s).fadeOut(a.transitionEffectSpeed,function(){var e=t(this).attr("aria-hidden","true").parents(":has(.steps)"),n=e.data("state");n.transitionShowElement&&(n.transitionShowElement.fadeIn(a.transitionEffectSpeed,function(){t(this).attr("aria-hidden","false")}),n.transitionShowElement=null)}).promise();break;case t.fn.steps.transitionEffect.slide:r.transitionShowElement=i.eq(n),i.eq(s).slideUp(a.transitionEffectSpeed,function(){var e=t(this).attr("aria-hidden","true").parents(":has(.steps)"),n=e.data("state");n.transitionShowElement&&(n.transitionShowElement.slideDown(a.transitionEffectSpeed,function(){t(this).attr("aria-hidden","false")}),n.transitionShowElement=null)}).promise();break;case t.fn.steps.transitionEffect.slideLeft:var d=i.eq(n),l=i.eq(s),p=l.outerWidth(!0),c=n>s?-p:p,b=n>s?p:-p;l.animate({left:c},a.transitionEffectSpeed,function(){t(this).hide().attr("aria-hidden","true")}).promise(),d.css("left",b+"px").show().attr("aria-hidden","false"),d.animate({left:0},a.transitionEffectSpeed).promise();break;default:i.eq(s).hide().attr("aria-hidden","true"),i.eq(n).show().attr("aria-hidden","false")}e.triggerHandler("stepChanged",[n,s])}else e.find(".steps li").eq(s).addClass("error");return!0}}function s(e){var n=e.data("options"),a=e.data("state"),r=C(e),s=t(document.createElement(n.contentContainerTag)).addClass("content"),l=n.startIndex;s.html(e.html()),e.attr("role","application").addClass(n.cssClass).empty().append(s);var p=s.find(n.headerTag),c=s.find(n.bodyTag);if(p.length>c.length)throw Error("One or more corresponding step contents are missing.");if(p.length<c.length)throw Error("One or more corresponding step titles are missing.");if(a.stepCount=c.length,n.saveState&&t.cookie){var m=t.cookie(E+r),b=parseInt(m,0);!isNaN(b)&&a.stepCount>b&&(l=b)}c.each(function(n){i(e,t(this),n)}),c.eq(l).show().attr("aria-hidden","false");var v=t(document.createElement(n.stepsContainerTag)).addClass("steps").append(t('<ul role="tablist"></ul>'));if(e.prepend(v),p.each(function(n){d(e,t(this),n),l>n&&e.find(".steps li").eq(n).removeClass("disabled").attr("aria-disabled","false").addClass("done")}),u(e,l),a.currentIndex=l,a.currentStep=h(e,a.currentIndex),n.enablePagination){var g=t('<ul role="menu" aria-label="'+n.labels.pagination+'"></ul>'),x=t(document.createElement(n.actionContainerTag)).addClass("actions").append(g);e.append(x),n.forceMoveForward||g.append(t('<li><a href="#previous" role="menuitem">'+n.labels.previous+"</a></li>")),g.append(t('<li><a href="#next" role="menuitem">'+n.labels.next+"</a></li>")),n.enableFinishButton&&g.append(t('<li><a href="#finish" role="menuitem">'+n.labels.finish+"</a></li>")),f(e),o(e)}}function i(t,e,n){var a=C(t),r=a+q+n,s=a+T+n;e.attr("id",r).attr("role","tabpanel").attr("aria-labelledby",s).addClass("body").hide().attr("aria-hidden","true")}function d(e,n,a){var r=C(e),s=r+k+a,i=r+q+a,d=r+T+a,o=e.data("options"),l=e.data("state"),u=e.find(".steps > ul"),f=p(o.titleTemplate,{index:a+1,title:n.html()}),c=t('<li role="tab"><a id="'+s+'" href="#'+d+'" aria-controls="'+i+'">'+f+"</a></li>");o.enableAllSteps||c.addClass("disabled").attr("aria-disabled","true"),n.attr("id",d).attr("tabindex","-1").addClass("title"),0===a?u.prepend(c):u.find("li").eq(a-1).after(c),0===a&&u.find("li").removeClass("first").eq(a).addClass("first"),a===l.stepCount-1&&u.find("li").removeClass("last").eq(a).addClass("last")}function o(e){var n=e.data("options"),a=e.data("state");if(!n.enableContentCache||!a.currentStep.contentLoaded)switch(m(t.fn.steps.contentMode,a.currentStep.contentMode)){case t.fn.steps.contentMode.iframe:e.find(".content > .body").eq(a.currentIndex).empty().html(t('<iframe src="'+a.currentStep.contentUrl+'" />')).data("loaded","1");break;case t.fn.steps.contentMode.async:var r=e.find("#"+C(e)+q+a.currentIndex).attr("aria-busy","true").empty().append(p(n.loadingTemplate,{text:n.labels.loading}));t.ajax({url:a.currentStep.contentUrl,cache:!1}).done(function(t){r.empty().html(t).attr("aria-busy","false").data("loaded","1")})}}function l(t,e){for(var n=t.data("options"),a=t.data("state"),r=C(t),s=e;a.stepCount>s;s++){var i=r+k+s,d=r+q+s,o=r+T+s,l=t.find(".title").eq(s).attr("id",o);t.find(".steps a").eq(s).attr("id",i).attr("aria-controls",d).attr("href","#"+o).html(p(n.titleTemplate,{index:s+1,title:l.html()})),t.find(".body").eq(s).attr("id",d).attr("aria-labelledby",o)}}function u(e,n,a){var r=C(e),s=e.data("options"),i=e.find("#"+r+k+n),d=t('<span class="current-info audible">'+s.labels.current+" </span>"),o=e.find(".content > .title");if(null!=a){var l=e.find("#"+r+k+a);l.parent().addClass("done").removeClass("current error").attr("aria-selected","false"),o.eq(a).removeClass("current").next(".body").removeClass("current"),d=l.find(".current-info"),i.focus()}i.prepend(d).parent().addClass("current").attr("aria-selected","true").removeClass("disabled done").attr("aria-disabled","false"),o.eq(n).addClass("current").next(".body").addClass("current")}function f(t){var e=t.data("options"),n=t.data("state");if(e.enablePagination){var a=t.find(".actions a[href$='#finish']").parent(),r=t.find(".actions a[href$='#next']").parent();if(!e.forceMoveForward){var s=t.find(".actions a[href$='#previous']").parent();n.currentIndex>0?s.removeClass("disabled").attr("aria-disabled","false"):s.addClass("disabled").attr("aria-disabled","true")}e.enableFinishButton&&e.showFinishButtonAlways?0===n.stepCount?(a.addClass("disabled").attr("aria-disabled","true"),r.addClass("disabled").attr("aria-disabled","true")):n.stepCount>1&&n.stepCount>n.currentIndex+1?(a.removeClass("disabled").attr("aria-disabled","false"),r.removeClass("disabled").attr("aria-disabled","false")):(a.removeClass("disabled").attr("aria-disabled","false"),r.addClass("disabled").attr("aria-disabled","true")):0===n.stepCount?(a.hide().attr("aria-hidden","true"),r.show().attr("aria-hidden","false").addClass("disabled").attr("aria-disabled","true")):n.stepCount>n.currentIndex+1?(a.hide().attr("aria-hidden","true"),r.show().attr("aria-hidden","false").removeClass("disabled").attr("aria-disabled","false")):e.enableFinishButton?(a.show().attr("aria-hidden","false"),r.hide().attr("aria-hidden","true")):r.addClass("disabled").attr("aria-disabled","true")}}function p(t,e){for(var n=t.match(/#([a-z]*)#/gi),a=0;n.length>a;a++){var r=n[a],s=r.substring(1,r.length-1);t=t.replace(r,c(e,s))}return t}function c(t,n){if(t[n]===e)throw Error('The key "'+n+'" does not exist in the substitute collection!');return t[n]}function h(n,a){var r=(n.data("options"),n.find("#"+C(n)+T+a)),s=r.next(".body"),i=null==s.data("mode")?t.fn.steps.contentMode.html:m(t.fn.steps.contentMode,/^\s*$/.test(s.data("mode"))||isNaN(s.data("mode"))?s.data("mode"):parseInt(s.data("mode"),0)),d=i===t.fn.steps.contentMode.html||s.data("url")===e?"":s.data("url"),o=i!==t.fn.steps.contentMode.html&&"1"===s.data("loaded");return{title:r.html(),content:i===t.fn.steps.contentMode.html?s.html():"",contentUrl:d,contentMode:i,contentLoaded:o}}function m(t,n){if(b("enumType",t),b("keyOrValue",n),"string"==typeof n){var a=t[n];if(a===e)throw Error('The enum key "'+n+'" does not exist.');return a}if("number"==typeof n){for(var r in t)if(t[r]===n)return n;throw Error('Invalid enum value "'+n+'".')}throw Error("Invalid key or value type.")}function b(t,e){if(null==e)throw Error('The argument "'+t+'" is null or undefined.')}function v(t){null==t.data("uid")&&t.data("uid","steps-uid-".concat(++w))}function C(t){return t.data("uid")}function g(t){return parseInt(t.attr("href").substring(t.attr("href").lastIndexOf("-")+1),0)}function x(e,n){var a=e.data("options");a.saveState&&t.cookie&&t.cookie(E+C(e),n)}function I(e){var n=t(this);if(n.data("options").suppressPaginationOnFocus&&n.find(":focus").is(":input"))return e.preventDefault(),!1;var a={left:37,right:39};e.keyCode===a.left?(e.preventDefault(),n.steps("previous")):e.keyCode===a.right&&(e.preventDefault(),n.steps("next"))}function y(e){e.preventDefault();var n=t(this),a=n.parents(":has(.steps)"),r=n.attr("href");switch(r.substring(r.lastIndexOf("#"))){case"#finish":a.steps("finish");break;case"#next":a.steps("next");break;case"#previous":a.steps("previous")}}function S(n){n.preventDefault();var a=t(this),s=a.parents(":has(.steps)"),i=s.data("state"),d=i.currentIndex;return a.parent().is(":not(.disabled):not(.current)")&&r(s,g(a)),d===i.currentIndex?(s.find("#"+C(s)+k+d).focus(),!1):e}var w=0,E="jQu3ry_5teps_St@te_",k="-t-",q="-p-",T="-h-";t.fn.steps=function(a){return t.fn.steps[a]?t.fn.steps[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?(t.error("Method "+a+" does not exist on jQuery.steps"),e):n.apply(this,arguments)},t.fn.steps.contentMode={html:0,iframe:1,async:2},t.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},t.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:t.fn.steps.transitionEffect.none,transitionEffectSpeed:200,onStepChanging:function(){return!0},onStepChanged:function(){},onFinishing:function(){return!0},onFinished:function(){},labels:{current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}},t.fn.steps.getCurrentIndex=function(){return t(this).data("state").currentIndex},t.fn.steps.getCurrentStep=function(){return t(this).data("state").currentStep},t.fn.steps.getStep=function(e){var n=t(this),a=n.data("state");return e===a.currentStep?a.currentStep:h(n,e)},t.fn.steps.next=function(){var e=t(this);return a(e,e.data("state").currentIndex+1)},t.fn.steps.previous=function(){var e=t(this);return a(e,e.data("state").currentIndex-1)},t.fn.steps.skip=function(){throw Error("Not yet implemented!")},t.fn.steps.finish=function(){var e=t(this),n=(e.data("options"),e.data("state")),a=e.find(".steps li").eq(n.currentIndex);e.triggerHandler("finishing",[n.currentIndex])?(a.addClass("done").removeClass("error"),e.triggerHandler("finished",[n.currentIndex])):a.addClass("error")},t.fn.steps.remove=function(e){var n=t(this),a=C(n),r=(n.data("options"),n.data("state"));return 0>e||e>r.stepCount||r.currentIndex===e?!1:(n.find("#"+a+T+e).remove(),n.find("#"+a+q+e).remove(),n.find("#"+a+k+e).parent().remove(),r.currentIndex>e&&(r.currentIndex--,x(n,r.currentIndex)),r.stepCount--,r.currentStep=h(n,r.currentIndex),0===e&&n.find(".steps li").first().addClass("first"),e===r.stepCount&&n.find(".steps li").eq(e).addClass("last"),l(n,e),f(n),!0)},t.fn.steps.add=function(e){var n=t(this);return n.steps("insert",n.data("state").stepCount,e),n},t.fn.steps.insert=function(e,n){var a=t(this),r=C(a),s=a.data("options"),o=a.data("state");if(0>e||e>o.stepCount)throw Error("Index out of range.");var u=a.find(".content"),p=t(document.createElement(s.headerTag)).html(n.title),c=t(document.createElement(s.bodyTag));(null==n.contentMode||n.contentMode===t.fn.steps.contentMode.html)&&c.html(n.content),0===e?u.prepend(c).prepend(p):u.find("#"+r+q+(e-1)).after(c).after(p),o.currentIndex>=e&&(o.currentIndex++,x(a,o.currentIndex)),o.stepCount++,i(a,c,e),d(a,p,e);var m=a.find("#"+r+k+e),b=m.parent();return o.currentIndex>e&&b.removeClass("disabled").attr("aria-disabled","false").addClass("done"),o.currentStep=h(a,o.currentIndex),m.bind("click.steps",S),l(a,e),f(a),a}})(jQuery);